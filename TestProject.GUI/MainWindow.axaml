<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:TestProject.Core;assembly=TestProject.Core"
        xmlns:converters="clr-namespace:TestProject.GUI.Converters"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="550"
        x:Class="TestProject.GUI.MainWindow"
        x:DataType="vm:TestProjectModel"
        Title="IoT Sensor Manager"
        Background="#f0f0f0"
        WindowStartupLocation="CenterScreen">


    <Window.Resources>
        <converters:BoolToColorConverter x:Key="BoolToColorConverter"/>
    </Window.Resources>
      
    <Window.Styles>
        <Style Selector="Border.card">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BoxShadow" Value="0 2 10 0 #15000000"/>
            <Setter Property="Margin" Value="0 0 0 15"/>
            <Setter Property="Padding" Value="15"/>
        </Style>
        <Style Selector="TextBlock.header">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0 0 0 10"/>
        </Style>
        <Style Selector="Button">
            <Setter Property="Padding" Value="12 8"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="#1976D2"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="TextBox">
            <Setter Property="Padding" Value="8 6"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        <Style Selector="Border.sensor">
            <Setter Property="Background" Value="#f8f8f8"/>
            <Setter Property="BorderBrush" Value="#e0e0e0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Margin" Value="0 0 10 0"/>
        </Style>
    </Window.Styles>
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with Status -->
        <Border Grid.Row="0" Classes="card">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Classes="header" Text="IoT Hub Connection"/>
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Ellipse Width="12" Height="12" Fill="{Binding IsConnected, Converter={StaticResource BoolToColorConverter}}"/>
                        <TextBlock Text="{Binding Status}" VerticalAlignment="Center" FontWeight="Medium"/>
                    </StackPanel>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                    <Button Classes="primary" Content="Connect" Command="{Binding ConnectCommand}" IsVisible="{Binding !IsConnected}"/>
                    <Button Content="Disconnect" Command="{Binding DisconnectCommand}" IsVisible="{Binding IsConnected}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Sensor Display -->
        <Border Grid.Row="1" Classes="card">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Classes="header" Text="Sensor Readings"/>
                
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Light Sensor -->
                    <Border Grid.Column="0" Classes="sensor">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Text="Light Sensor" FontWeight="Bold" Margin="0 0 0 10"/>
                            
                            <Border Grid.Row="1" 
                                    Background="{Binding LightSensorValue, Converter={StaticResource BoolToColorConverter}}" 
                                    Height="40" 
                                    CornerRadius="4"
                                    Margin="0 0 0 10"/>
                            
                            <TextBlock Grid.Row="2" 
                                       Text="{Binding LightSensorText}" 
                                       HorizontalAlignment="Center" 
                                       FontSize="24"
                                       FontWeight="Bold"/>
                            
                            <Button Grid.Row="3" 
                                    Content="Toggle Value" 
                                    Command="{Binding ToggleLightSensorCommand}"
                                    HorizontalAlignment="Center"
                                    Margin="0 10 0 0"/>
                        </Grid>
                    </Border>
                    
                    <!-- Vibration Sensor -->
                    <Border Grid.Column="1" Classes="sensor">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Text="Vibration Sensor" FontWeight="Bold" Margin="0 0 0 10"/>
                            
                            <Border Grid.Row="1" 
                                    Background="{Binding VibrationSensorValue, Converter={StaticResource BoolToColorConverter}}" 
                                    Height="40" 
                                    CornerRadius="4"
                                    Margin="0 0 0 10"/>
                            
                            <!-- Vibration Sensor - complete the TextBlock and Button -->
                            <TextBlock Grid.Row="2" 
                                    Text="{Binding VibrationSensorText}" 
                                    HorizontalAlignment="Center" 
                                    FontSize="24"
                                    FontWeight="Bold"/>

                            <Button Grid.Row="3" 
                                    Content="Toggle Value" 
                                    Command="{Binding ToggleVibrationSensorCommand}"
                                    HorizontalAlignment="Center"
                                    Margin="0 10 0 0"/>
                        </Grid>
                    </Border>
                    
                    <!-- Motion Sensor -->
                    <Border Grid.Column="2" Classes="sensor">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="Motion Sensor" FontWeight="Bold" Margin="0 0 0 10"/>


                            <Border Grid.Row="1" 
                                    Background="{Binding MotionSensorValue, Converter={StaticResource BoolToColorConverter}}" 
                                    Height="40" 
                                    CornerRadius="4"
                                    Margin="0 0 0 10"/>

                            <TextBlock Grid.Row="2" 
                                    Text="{Binding MotionSensorText}" 
                                    HorizontalAlignment="Center" 
                                    FontSize="24"
                                    FontWeight="Bold"/>

                            <Button Grid.Row="3" 
                                    Content="Toggle Value" 
                                    Command="{Binding ToggleMotionSensorCommand}"
                                    HorizontalAlignment="Center"
                                    Margin="0 10 0 0"/>
                        </Grid>

                    </Border>
                </Grid>
            </Grid>
        </Border>

        <!-- Event Log -->
        <Border Grid.Row="2" Classes="card">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Classes="header" Text="Sensor Event Log"/>
                
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <Border Background="#f8f8f8"
                            BorderBrush="#e0e0e0"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="10">
                        <TextBlock Text="{Binding EventLog}" 
                                   TextWrapping="Wrap"
                                   FontFamily="Consolas"
                                   FontSize="14"/>
                    </Border>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Footer -->
        <StackPanel Grid.Row="3" 
                   HorizontalAlignment="Center" 
                   Margin="0,5,0,0"
                   Orientation="Horizontal"
                   Spacing="5">
            <TextBlock Text="IoT Sensor Manager" 
                       FontSize="12"
                       Foreground="Gray"/>
            <TextBlock Text="â€¢" 
                       FontSize="12"
                       Foreground="Gray"/>
            <TextBlock Text="v1.0" 
                       FontSize="12"
                       Foreground="Gray"/>
        </StackPanel>
    </Grid>
</Window>